import fs from 'fs';
import path from 'path';
import { fileURLToPath } from 'url';

const __filename = fileURLToPath(import.meta.url);
const __dirname = path.dirname(__filename);

// 英語から日本語への翻訳マッピング
const translations = {
  // 一般的な単語
  "home": "ホーム",
  "house": "家",
  "search": "検索",
  "user": "ユーザー",
  "profile": "プロフィール",
  "settings": "設定",
  "menu": "メニュー",
  "notification": "通知",
  "message": "メッセージ",
  "mail": "メール",
  "email": "メール",
  "phone": "電話",
  "camera": "カメラ",
  "photo": "写真",
  "image": "画像",
  "video": "動画",
  "music": "音楽",
  "play": "再生",
  "pause": "一時停止",
  "stop": "停止",
  "next": "次へ",
  "previous": "前へ",
  "forward": "進む",
  "backward": "戻る",
  "up": "上",
  "down": "下",
  "left": "左",
  "right": "右",
  "arrow": "矢印",
  "chevron": "山形",
  "close": "閉じる",
  "delete": "削除",
  "remove": "除去",
  "add": "追加",
  "plus": "プラス",
  "minus": "マイナス",
  "edit": "編集",
  "save": "保存",
  "download": "ダウンロード",
  "upload": "アップロード",
  "share": "共有",
  "like": "いいね",
  "heart": "ハート",
  "favorite": "お気に入り",
  "star": "星",
  "bookmark": "ブックマーク",
  "flag": "フラグ",
  "tag": "タグ",
  "calendar": "カレンダー",
  "clock": "時計",
  "time": "時間",
  "date": "日付",
  "location": "場所",
  "map": "地図",
  "pin": "ピン",
  "marker": "マーカー",
  "navigation": "ナビゲーション",
  "compass": "コンパス",
  "globe": "地球",
  "world": "世界",
  "language": "言語",
  "translate": "翻訳",
  "file": "ファイル",
  "folder": "フォルダ",
  "document": "ドキュメント",
  "page": "ページ",
  "book": "本",
  "note": "ノート",
  "list": "リスト",
  "grid": "グリッド",
  "table": "テーブル",
  "chart": "チャート",
  "graph": "グラフ",
  "bar": "棒",
  "pie": "円",
  "lock": "ロック",
  "unlock": "アンロック",
  "key": "鍵",
  "security": "セキュリティ",
  "shield": "シールド",
  "warning": "警告",
  "alert": "アラート",
  "error": "エラー",
  "info": "情報",
  "help": "ヘルプ",
  "question": "質問",
  "check": "チェック",
  "checkmark": "チェックマーク",
  "cross": "バツ",
  "cancel": "キャンセル",
  "filter": "フィルター",
  "sort": "並び替え",
  "refresh": "更新",
  "reload": "リロード",
  "sync": "同期",
  "cloud": "クラウド",
  "server": "サーバー",
  "database": "データベース",
  "network": "ネットワーク",
  "wifi": "WiFi",
  "bluetooth": "Bluetooth",
  "signal": "シグナル",
  "battery": "バッテリー",
  "power": "電源",
  "volume": "音量",
  "sound": "サウンド",
  "speaker": "スピーカー",
  "microphone": "マイク",
  "headphones": "ヘッドフォン",
  "printer": "プリンター",
  "monitor": "モニター",
  "display": "ディスプレイ",
  "screen": "スクリーン",
  "desktop": "デスクトップ",
  "laptop": "ノートPC",
  "mobile": "モバイル",
  "tablet": "タブレット",
  "device": "デバイス",
  "code": "コード",
  "terminal": "ターミナル",
  "command": "コマンド",
  "bug": "バグ",
  "tool": "ツール",
  "wrench": "レンチ",
  "gear": "ギア",
  "cog": "歯車",
  "shopping": "ショッピング",
  "cart": "カート",
  "bag": "バッグ",
  "basket": "バスケット",
  "credit": "クレジット",
  "card": "カード",
  "payment": "支払い",
  "money": "お金",
  "dollar": "ドル",
  "coin": "コイン",
  "wallet": "ウォレット",
  "gift": "ギフト",
  "present": "プレゼント",
  "package": "パッケージ",
  "box": "ボックス",
  "truck": "トラック",
  "car": "車",
  "vehicle": "乗り物",
  "bus": "バス",
  "train": "電車",
  "plane": "飛行機",
  "ship": "船",
  "bike": "自転車",
  "walk": "歩く",
  "run": "走る",
  "sport": "スポーツ",
  "game": "ゲーム",
  "trophy": "トロフィー",
  "medal": "メダル",
  "award": "賞",
  "weather": "天気",
  "sun": "太陽",
  "moon": "月",
  "cloud": "雲",
  "rain": "雨",
  "snow": "雪",
  "wind": "風",
  "storm": "嵐",
  "umbrella": "傘",
  "tree": "木",
  "leaf": "葉",
  "flower": "花",
  "plant": "植物",
  "nature": "自然",
  "animal": "動物",
  "pet": "ペット",
  "dog": "犬",
  "cat": "猫",
  "bird": "鳥",
  "fish": "魚",
  "food": "食べ物",
  "drink": "飲み物",
  "coffee": "コーヒー",
  "tea": "お茶",
  "beer": "ビール",
  "wine": "ワイン",
  "restaurant": "レストラン",
  "cafe": "カフェ",
  "kitchen": "キッチン",
  "cook": "料理",
  "recipe": "レシピ",
  "health": "健康",
  "medical": "医療",
  "hospital": "病院",
  "doctor": "医者",
  "nurse": "看護師",
  "medicine": "薬",
  "pill": "錠剤",
  "heart": "心臓",
  "fitness": "フィットネス",
  "gym": "ジム",
  "education": "教育",
  "school": "学校",
  "university": "大学",
  "student": "学生",
  "teacher": "教師",
  "learn": "学ぶ",
  "study": "勉強",
  "graduation": "卒業",
  "business": "ビジネス",
  "office": "オフィス",
  "work": "仕事",
  "briefcase": "ブリーフケース",
  "meeting": "会議",
  "presentation": "プレゼンテーション",
  "graph": "グラフ",
  "chart": "チャート",
  "people": "人々",
  "team": "チーム",
  "group": "グループ",
  "community": "コミュニティ",
  "social": "ソーシャル",
  "friend": "友達",
  "family": "家族",
  "baby": "赤ちゃん",
  "child": "子供",
  "man": "男性",
  "woman": "女性",
  "smile": "笑顔",
  "happy": "幸せ",
  "sad": "悲しい",
  "angry": "怒り",
  "love": "愛",
  "icon": "アイコン",
  "variation": "バリエーション",
  "common": "共通",
  "basic": "基本",
  "simple": "シンプル",
  "outline": "アウトライン",
  "filled": "塗りつぶし",
  "solid": "ソリッド",
  "line": "ライン",
  "circle": "円",
  "square": "四角",
  "triangle": "三角",
  "shape": "図形",
  "symbol": "シンボル",
  "sign": "サイン",
  "button": "ボタン",
  "link": "リンク",
  "chain": "チェーン",
  "attach": "添付",
  "clip": "クリップ",
  "copy": "コピー",
  "paste": "ペースト",
  "cut": "カット",
  "undo": "元に戻す",
  "redo": "やり直し",
  "zoom": "ズーム",
  "resize": "リサイズ",
  "move": "移動",
  "drag": "ドラッグ",
  "drop": "ドロップ",
  "fullscreen": "フルスクリーン",
  "expand": "展開",
  "collapse": "折りたたむ",
  "maximize": "最大化",
  "minimize": "最小化",
  "window": "ウィンドウ",
  "tab": "タブ",
  "panel": "パネル",
  "sidebar": "サイドバー",
  "header": "ヘッダー",
  "footer": "フッター",
  "layout": "レイアウト",
  "template": "テンプレート",
  "theme": "テーマ",
  "color": "色",
  "palette": "パレット",
  "brush": "ブラシ",
  "pen": "ペン",
  "pencil": "鉛筆",
  "marker": "マーカー",
  "highlighter": "蛍光ペン",
  "eraser": "消しゴム",
  "paint": "ペイント",
  "draw": "描く",
  "design": "デザイン",
  "art": "アート",
  "creative": "クリエイティブ",
  "magic": "マジック",
  "sparkle": "スパークル",
  "flash": "フラッシュ",
  "lightning": "稲妻",
  "fire": "火",
  "water": "水",
  "drop": "滴",
  "droplet": "水滴",
};

// 翻訳関数
function translateText(text) {
  if (!text) return '';
  
  const words = text.toLowerCase().split(/[\s,.-]+/).filter(w => w);
  const translatedWords = words.map(word => {
    // 数字やバージョン表記を除外
    if (/^v?\d+$/.test(word)) return '';
    return translations[word] || '';
  }).filter(w => w);
  
  return translatedWords.join('・');
}

// アイコン翻訳関数
function translateIcon(icon) {
  return {
    ...icon,
    titleJa: translateText(icon.title),
    descriptionJa: translateText(icon.description),
    tagsJa: icon.tags ? icon.tags.map(tag => translateText(tag)).filter(t => t) : []
  };
}

// メイン処理
async function main() {
  const iconsPath = path.join(__dirname, 'public', 'data', 'icons.json');
  
  console.log('Loading icons...');
  const icons = JSON.parse(fs.readFileSync(iconsPath, 'utf8'));
  
  console.log(`Processing ${icons.length} icons...`);
  const translatedIcons = icons.map((icon, index) => {
    if (index % 1000 === 0) {
      console.log(`Progress: ${index}/${icons.length}`);
    }
    return translateIcon(icon);
  });
  
  console.log('Saving translated icons...');
  fs.writeFileSync(iconsPath, JSON.stringify(translatedIcons, null, 2), 'utf8');
  
  console.log('Done! Added Japanese translations to all icons.');
  
  // サンプルを表示
  console.log('\nSample translations:');
  translatedIcons.slice(0, 5).forEach(icon => {
    console.log(`\nID: ${icon.id}`);
    console.log(`Title: ${icon.title} -> ${icon.titleJa}`);
    console.log(`Description: ${icon.description} -> ${icon.descriptionJa}`);
    console.log(`Tags: ${icon.tags?.join(', ')} -> ${icon.tagsJa?.join(', ')}`);
  });
}

main().catch(console.error);
